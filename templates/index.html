<!DOCTYPE html>
<html>
<head>
    <title>Diabetes Prediction</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial; background: #f4f4f4; padding: 20px; }
        .container { max-width: 600px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        input, label { display: block; width: 100%; margin-bottom: 10px; }
        input[type="submit"] { background: #28a745; color: white; border: none; padding: 10px; font-weight: bold; cursor: pointer; }
        .result-box { margin-top: 20px; padding: 15px; border-radius: 5px; background: #e9f7ef; border-left: 5px solid #28a745; }
        .risk-chart { width: 100%; height: 200px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ðŸ©º Diabetes Prediction</h2>
        <form method="POST">
            <label>Pregnancies:</label>
            <input type="number" name="Pregnancies" step="any" required>

            <label>Glucose:</label>
            <input type="number" name="Glucose" step="any" required>

            <label>Blood Pressure:</label>
            <input type="number" name="BloodPressure" step="any" required>

            <label>Skin Thickness:</label>
            <input type="number" name="SkinThickness" step="any" required>

            <label>Insulin:</label>
            <input type="number" name="Insulin" step="any" required>

            <label>BMI:</label>
            <input type="number" name="BMI" step="any" required>

            <label>Diabetes Pedigree Function:</label>
            <input type="number" name="DiabetesPedigreeFunction" step="any" required>

            <label>Age:</label>
            <input type="number" name="Age" step="any" required>

            <input type="submit" value="Predict">
        </form>

        {% if result %}
            <div class="result-box">
                <h3> Prediction Result: <strong>{{ result }}</strong></h3>
                {% if probability %}
                    <p> Risk Probability: <strong>{{ (probability * 100) | round(2) }}%</strong></p>
                {% endif %}
                <p><strong>Entered Values:</strong></p>
                <ul>
                    {% for key, value in input_data.items() %}
                        <li>{{ key }}: {{ value }}</li>
                    {% endfor %}
                </ul>
            </div>

            {% if probability is not none %}
            <canvas id="riskChart" class="risk-chart"></canvas>
            <script>
                var ctx = document.getElementById('riskChart').getContext('2d');
                var riskValue = {{ (probability * 100) | round(2) }};
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Risk %'],
                        datasets: [{
                            label: 'Diabetes Risk',
                            data: [riskValue],
                            backgroundColor: riskValue > 70 ? 'red' : (riskValue > 40 ? 'orange' : 'green'),
                        }]
                    },
                    options: {
                        scales: {
                            y: { beginAtZero: true, max: 100 }
                        }
                    }
                });
            </script>
            {% endif %}
        {% endif %}
    </div>
</body>
</html>
